
# 20. 表示数值的字符串

* 请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。

* 数值（按顺序）可以分成以下几个部分：
    * 若干空格
    * 一个 小数 或者 整数
    * （可选）一个 'e' 或 'E' ，后面跟着一个 整数
    * 若干空格

* 小数（按顺序）可以分成以下几个部分：
    * （可选）一个符号字符（'+' 或 '-'）
    * 下述格式之一：
        * 至少一位数字，后面跟着一个点 '.'
        * 至少一位数字，后面跟着一个点 '.' ，后面再跟着至少一位数字
        * 一个点 '.' ，后面跟着至少一位数字

* 整数（按顺序）可以分成以下几个部分：
    * （可选）一个符号字符（'+' 或 '-'）
    * 至少一位数字

* 部分数值列举如下：
    * `["+100", "5e2", "-123", "3.1416", "-1E-16", "0123"]`
    
* 部分非数值列举如下：
    `["12e", "1a3.14", "1.2.3", "+-5", "12e+5.4"]`

* 例如：
    * 输入：`s = "0"`
    * 输出：`true`

### 解题思路

* 使用有限状态自动机解决。

* 字符类型：空格，数字，正负号，小数点，幂符号；
* 状态定义：
    * 0.开始的空格
    * 1.幂符号前的正负号
    * 2.小数点前的数字
    * 3.小数点、小数点后的数字
    * 4.当小数点前为空格时，小数点、小数点后的数字
    * 5.幂符号
    * 6.幂符号后的正负号
    * 7.幂符号后的数字
    * 8.结尾的空格
* 结束状态：
    * 合法的结束状态有2,3,7,8；

* 初始化：
    * 状态转移表states：使用哈希表存储；
    * 当前状态p：起始状态初始化为p=0;
* 状态转移循环：遍历字符串s的每个字符c；
    * 记录字符类型t：
        * 当c为正负号时，执行t = 's'；
        * 当c为数字时，执行t = 'd'；
        * 当c为e，E时，执行t = 'e'；
        * 当c为.，空格时，执行t = c;
        * 否则，执行t = '?'，代表为不属于判断范围的非法字符，直接返回false。
    * 终止条件：若字符类型t不在哈希表，说明无法转移至下一状态，因此返回false。
    * 状态转移：状态p转移至states[p][t]。
* 返回值：跳出循环后，若状态p属于2,3,7,8，说明结尾合法，返回true，否则返回false。


```python
class Solution(object):
    def isNumber(self, s):
        """
        :type s: str
        :rtype: bool
        """
        states = [
            {' ':0, 's':1, 'd':2, '.':4},
            {'d':2, '.':4},
            {'d':2, '.':3, 'e':5, ' ':8},
            {'d':3, 'e':5, ' ':8},
            {'d':3},
            {'s':6, 'd':7},
            {'d':7},
            {'d':7, ' ':8},
            {' ':8}
        ]

        p = 0
        for c in s:
            if '0' <= c <= '9':
                t = 'd'  # 数字
            elif c in '+-':
                t = 's'  # sign
            elif c in 'eE':
                t = 'e'  # e or E
            elif c in '. ':
                t = c  # dot, black
            else:
                t = '?'  # unknown
            if t not in states[p]:
                return False
            
            p = states[p][t]
        return p in (2, 3, 7, 8)
```

* 时间复杂度：$O(N)$
* 空间复杂度：$O(1)$
