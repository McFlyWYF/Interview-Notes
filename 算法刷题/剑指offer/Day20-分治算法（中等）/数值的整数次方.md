
# 16. 数值的整数次方

* 实现 `pow(x, n)` ，即计算 `x` 的 `n` 次幂函数（即，$x^n$）。不得使用库函数，同时不需要考虑大数问题。

#### 解题思路

##### 快速幂（二分法）

* 二分推导
    * 当n为偶数：$x^n=(x^2)^{n//2}$
    * 当n为奇数：$x^n=x(x^2)^{n//2}$

* 幂结果获取
    * 根据二分推导，通过循环$x=x^2$，每次把幂从n降至n//2，直至将幂降为0；
    * 设res=1，则初始状态$x^n=x^n · res$。在循环二分时，每当n为奇数时，将多出的一项x乘入res，则最终可化至$x^n=x^0·res=res$，返回res即可。

* 转化为位运算
    * 向下整除n//2等价于右移一位n>>1；
    * 取余数n%2等价于判断二进制最右一位值n&1；

##### 算法流程

* 当 x = 0 时：直接返回 0 （避免后续 x = 1 / x 操作报错）。
* 初始化 res = 1；
* 当 n < 0 时：把问题转化至 n ≥ 0 的范围内，即执行 x = 1/x，n = - n ；
* 循环计算：当 n = 0时跳出；
    * 当 n & 1 = 1 时：将当前 x 乘入 res （即 res *= x）；
    * 执行 x = x^2   （即 x *= x）；
    * 执行 n 右移一位（即 n >>= 1）。
* 返回 res。


```python
class Solution(object):
    def myPow(self, x, n):
        """
        :type x: float
        :type n: int
        :rtype: float
        """
        if x == 0:
            return 0
        res = 1
        if n < 0:
            x = 1 / x
            n = -n
        while n:
            if n&1:  # n % 2 == 1
                res *= x
            x *= x
            n >>= 1  # n //= 2
        return res
```

* 时间复杂度：$O(log_2n)$
* 空间复杂度：$O(1)$
